import { httpGet } from "../utils/fetchURL";
import { formatAddress } from "../utils/utils";
import { CHAIN } from "./chains";

export const DefaultDexTokensBlacklisted: Record<string, Array<string>> = {
  [CHAIN.ETHEREUM]: [
    "0x044fe33895Cb7c6e4566DA8E24420C1110933a63",
    "0x888888aE2c4A298EFd66D162fFC53b3F2a869888",
    "0xb4357054c3da8d46ed642383f03139ac7f090343", // PORT3 - hacked
  ],
  [CHAIN.BSC]: [
    "0xc08cd26474722ce93f4d0c34d16201461c10aa8c",
    "0xda0638ea374c4c5bf2914e6f4d5b2335deb8d80d",
    "0xf4B385849f2e817E92bffBfB9AEb48F950Ff4444",
    "0xf9a2e332b1ecd3d6ab51618432d68c8d5995c992",
    "0x23d3f4eaaa515403c6765bb623f287a8cca28f2b",
    "0x6d5ad1592ed9d6d1df9b93c793ab759573ed6714",
    "0x3b248CEfA87F836a4e6f6d6c9b42991b88Dc1d58",
    "0xd89B7dD376E671c124352267516BEF1C2cc231a3",
    "0xAC23B90A79504865D52B49B327328411a23d4dB2",
    "0xF39e4b21c84e737Df08e2C3b32541d856f508E48",
    "0x1AeCab957bAD4C6e36DD29C3d3BB470c4C29768A",
    "0xc71b5f631354be6853efe9c3ab6b9590f8302e81",
    "0xe6df05ce8c8301223373cf5b969afcb1498c5528",
    "0xa0c56a8c0692bd10b3fa8f8ba79cf5332b7107f9",
    "0xb4357054c3da8d46ed642383f03139ac7f090343",
    "0x6bdcce4a559076e37755a78ce0c06214e59e4444",
    "0x87d00066cf131ff54b72b134a217d5401e5392b6",
    "0x30c60b20c25b2810ca524810467a0c342294fc61",
    "0xd82544bf0dfe8385ef8fa34d67e6e4940cc63e16",
    "0x595e21b20e78674f8a64c1566a20b2b316bc3511",
    "0x783c3f003f172c6ac5ac700218a357d2d66ee2a2",
    "0xb9e1fd5a02d3a33b25a14d661414e6ed6954a721",
    "0x95034f653D5D161890836Ad2B6b8cc49D14e029a",
    "0xFf7d6A96ae471BbCD7713aF9CB1fEeB16cf56B41",
    "0xde04da55b74435d7b9f2c5c62d9f1b53929b09aa",
    "0x4fa7c69a7b69f8bc48233024d546bc299d6b03bf",
    "0x27d72484f1910F5d0226aFA4E03742c9cd2B297a",
    "0x6e7573e492f31107Ef98029276922854e919cA28",
    "0xaf44A1E76F56eE12ADBB7ba8acD3CbD474888122",
    "0xb994882a1b9bd98A71Dd6ea5F61577c42848B0E8",
    "0x9e24415d1e549ebc626a13a482bb117a2b43e9cf",
    "0xf2a92bc1cf798ff4de14502a9c6fda58865e8d5d",
    "0x477C2c0459004E3354Ba427FA285D7C053203c0E",
    "0x6CFfFa5bFD4277a04D83307fEedFe2D18D944DD2",
    "0xd5dF4d260D7a0145F655bcBf3B398076F21016C7",
    "0x82ec31d69b3c289e541b50e30681fd1acad24444",
    "0x82Ec31D69b3c289E541b50E30681FD1ACAd24444",
    "0x02e75d28a8aa2a0033b8cf866fcf0bb0e1ee4444",
    "0x4c9027e10c5271efca82379d3123917ae3f2374e",
    "0x3ac8e2c113d5d7824ac6ebe82a3c60b1b9d64444",
    "0x924fa68a0fc644485b8df8abfa0a41c2e7744444",
    "0x810df4c7daf4ee06ae7c621d0680e73a505c9a06",
    "0x302dfaf2cdbe51a18d97186a7384e87cf599877d",
    "0xa3cfb853339b77f385b994799b015cb04b208fe6",
    "0x76e9b54b49739837be8ad10c3687fc6b543de852",
    "0xb4357054c3da8d46ed642383f03139ac7f090343",
  ],
  [CHAIN.ARBITRUM]: [
    "0x2fcAA28BE8549F3953FCf7cae4CC9FBe6Ab2E501",
    "0x3B94Cfdf557f9AAd983fE4E56dd4846958EF708A",
    "0xC1fb38F174D16b1ff46c1CB04b52D5CF157940ee",
    "0x9B34F0cfA7800d21a21BDA50253264e292CBB217",
    "0x560363BdA52BC6A44CA6C8c9B4a5FadbDa32fa60",
    "0xd81Fb17c5A0e6c20BEf8a6a9757a7daf88bfBbbC",
    "0x570F95A4Ac86E2b8EBA86B09d88B1916EF9a39E4",
    "0xc519cE7572EA48b64acbf6BE37a8f9CA39CC5671",
    "0x22B2bA593B6c35Ea3188936CC8502123b7719AaC",
    "0x56ccFe64Cd2420192C5b954b884C9FaD4F667EcF",
    "0x7f70b6b4da3197012128f447482d0c8168A9dA3b",
    "0x845E0f28770E36f4a8DAF3e1d89C6BA3aFFdE345",
    "0xB7e628eB685AeBfa272dfA9C2AA5a6c71d39BCD7",
    "0xfa17041041bF3B19C02C775CC1707C0c5F8E0A44",
    "0x2ba2bA7C299b1c27651FDfb3A830426008663a5A",
    "0xf2224C287c90364391d1fEb4a8eBaadf0b50B774",
    "0x02688Db98424c177672700741454a8CA9e3AE304",
    "0xEAb61ED949a34a32E18359b1A143000406B484B9",
    "0x01538B776363CF6363b0217853082342669825f3",
    "0x0F10f8679d5A417ECd77efDC81EC2EFDB082178D",
    "0x4f8599F84774244E94f66BFF4b14E8C3a431edA3",
    "0x5AF536856E00386cE981FAcb5AF9454Dc389B4AE",
    "0x34890c6cD538c8b1fdbD110b9A5472336F7536c6",
    "0xaa1Aa4da0275f537cfb8729252B775749dDd7eb1",
    "0xbEa03EDB4C8B8d94bcD0993bBde41749e5d71f20",
    "0x3352154E5EDf4DE15304775BBb96d4c2D33C0D10",
    "0x4103e891D0dD3CE3500EFbcC03da4877713728ca",
    "0x33ca9596999f6608Fa3F765aacD98c266207D62E",
    "0x7ed4C778f763f5D68FE688f65499f02FB940745f",
    "0x08a55CF4ad5B770624BD8e087CeDeD413A59dC4F",
    "0x722af8C0A93232e7E2eA3F9eD52a7d8746b95a44",
    "0x3Dd972B41C22794670e17545Ec603F5923FF52d1",
    "0x56649f320fC686143eCcD6f15D3bCE784a968748",
    "0x9D66901b3F8AAEf2CF2AB26Cd51792f6785A159e",
    "0x5f16282E8C95E15667eE6473622517F4E571952e",
    "0xD2D039811384a1A3e13DB498e711DAe3f2BfA542",
    "0xa39052Dbd640e7ad9e8537860C13134D0f432880",
    "0xb8499dbF176de8eCed16c478CFf51997A529F1bE",
  ],
  [CHAIN.BASE]: [
    "0xAb6363dA0C80cEF3Ae105Bd6241E30872355d021",
  ],
};

export function getDefaultDexTokensBlacklisted(chain: string): Array<string> {
  return DefaultDexTokensBlacklisted[chain]
    ? DefaultDexTokensBlacklisted[chain].map((item) => formatAddress(item))
    : [];
}

export function getAllDexTokensBlacklisted(): Array<string> {
  let bl: Array<string> = [];

  for (const tokens of Object.values(DefaultDexTokensBlacklisted)) {
    bl = bl.concat(tokens.map((item) => formatAddress(item)));
  }

  return bl;
}

interface ChainTokenConfig {
  chainId: number;
  tokenListUrl: string;
}

const ChainConfigs: { [key: string]: ChainTokenConfig } = {
  [CHAIN.ETHEREUM]: {
    chainId: 1,
    tokenListUrl: "https://tokens.coingecko.com/ethereum/all.json",
  },
  [CHAIN.ARBITRUM]: {
    chainId: 42161,
    tokenListUrl:
      "https://raw.githubusercontent.com/sushiswap/list/master/lists/token-lists/default-token-list/tokens/arbitrum.json",
  },
  [CHAIN.BSC]: {
    chainId: 56,
    tokenListUrl:
      "https://raw.githubusercontent.com/pancakeswap/token-list/main/lists/coingecko.json",
  },
  [CHAIN.BASE]: {
    chainId: 8453,
    tokenListUrl:
      "https://raw.githubusercontent.com/sushiswap/list/master/lists/token-lists/default-token-list/tokens/base.json",
  },
  [CHAIN.AVAX]: {
    chainId: 43114,
    tokenListUrl:
      "https://raw.githubusercontent.com/sushiswap/list/master/lists/token-lists/default-token-list/tokens/avalanche.json",
  },
};

export async function getDefaultDexTokensWhitelisted({
  chain,
}: {
  chain: string;
}): Promise<Array<string>> {
  if (ChainConfigs[chain]) {
    const blacklisted = getDefaultDexTokensBlacklisted(chain);
    const data = await httpGet(ChainConfigs[chain].tokenListUrl);
    const tokens = data.tokens ? data.tokens : data;
    return tokens
      .filter(
        (token: any) => Number(token.chainId) === ChainConfigs[chain].chainId,
      )
      .map((token: any) => formatAddress(token.address))
      .filter((token: string) => !blacklisted.includes(token));
  }

  return [];
}

export const DefaultVaultsBlacklisted: Record<string, Array<string>> = {
  [CHAIN.SONIC]: [
    // these vaults invoked in Stream Finance rug activities
    // so we won't count metrics from them
    '0x69dfa0235f5df814fb15e1d7c774dc1bc52ab338',
    '0x4c0af5d6bcb10b3c05fb5f3a846999a3d87534c7',
    '0x2de851e60e428106fc98fe94017466f8d71793d1',
    '0x3d9e5462a940684073eed7e4a13d19ae0dcd13bc',
    '0xeeb1dc1ca7ffc5b54ad1cc4c1088db4e5657cb6c',
    '0xeeb63d2d370c5318ef174d366a41507f9380f093',
    '0xa5cd24d9792f4f131f5976af935a505d19c8db2b',
    '0x196f3c7443e940911ee2bb88e019fd71400349d9',
    '0x0806af1762bdd85b167825ab1a64e31cf9497038',
    '0xb38d431e932fea77d1df0ae0dfe4400c97e597b8',
    '0x05d57366b862022f76fe93316e81e9f24218bbfc',
    '0x1cda7e7b2023c3f3c94aa1999937358fa9d01aab',
    '0x9144c0f0614dd0ace859c61cc37e5386d2ada43a',
    '0xeeaab5c863f4b1c5356af138f384adc25cb70da6',
    '0x6f2ab32a6487a2996c74ed2b173dfdf3d5eedb58',
    '0xa07b57d1bbcad5f0397fdd9e160bc208906c4f91',
    '0x7cf924a8b791b7a1660a15eeeeafbb2a40242e2c',
    '0xc8ceb7816744008f44d505320e82de49b0b4d287',
    '0x88524a3c11a5df9d83b6a25d4fb90e8e72d25983',
    '0x0f3d31c8d8b2d64b0e4edcc311bd3fcd1db40726',
    '0x616589e4709c6f5b69785a9c99120eb7792d37ad',
    '0x570149bc2784eff2bf4ee13de9e501e5d915cd4f',
    '0x79627f3d378cbe1c9fcda4e04b3baf5994224289',
    '0xf3c631b979eb59d8333374baa7c58b5aff5e24d2',
    '0x57056b888527a9ca638ca06f2e194ef73a32cafc',
    '0x911af5bf5b7dd0f83869ba857edfdc3dea8254c2',
    '0xcb44fcdeffc501f4a375bd9f93067092689697a1',
    '0x1e1482e7bc32cd085d7af61f29019ba372b63277',
    '0xf6e2ddf7a149c171e591c8d58449e371e6dc7570',
    '0x6c7b6427a0155ffa12393ee13786f2b0ab700810',
    '0xfffc9d22304cf49784e9b31ddbeb066344b2b856',
    '0x4d787b1bb6a3198f1097fff96f281e616ae28984',
    '0xd506f1e4adfcf1196b7c5d2ebf4e858e33d7a93e',
    '0x85d0986eb2e8c0b7baa6d9be44aefa5ba18ddb8a',
    '0x3864882a0ea7b5a2b74f21a9fb0838614f3e518d',
    '0xf7dd82bf2347c8b0ac6e7334eb1a0a7c980117c4',
    '0xdbc46ff39cae7f37c39363b0ca474497dad1d3cf',
    '0x8c962a8e69f0f5bda4b7372c6837c4d6550830fa',
    '0xd5ba622ae224054e98f983a560615589f954e266',
    '0x7f173f838bcab70b878fba3babf6c18003c4d95c',
    '0x857270b5bfd0b4a23242999ffe69808acf02264a',
    '0x248bff6eeec04358b68e07e546ee0dcf2bcb23a9',
    '0xe5bed43446cf82109033206c2e319f53ed49bf6a',
    '0x1f5f939465c40574f250b38f3ba6fcc325e02725',
    '0x16729f48a48e521d2ee7e64d00ace2a88c938f6c',
    '0x93ba6b17c25c1a24ee6a96bd8a94fe1a27b512e9',
    '0xd5f15887d06a699738a9f224f42eca92944b5dfc',
    '0xb93cfba2e41a6bac4065bf7e7b333d920e060429',
    '0x0d137d7899f070ccaef6550a2f24e95d5f16845f',
    '0x6579f65efb1bf0f7d3fa05fcd767cd06ad35932d',
    '0x130770f0aae81814a6289d9b6c26ca33475a3d6e',
    '0xf2f4796389ae23f11973e6939500a6c9f01866cf',
    '0x9ae05f333a298fcf4823a6cad401c407617c45dd',
    '0xee29d5b370e85138f0263dc5fea31e561d7a3e84',
    '0xcc30fae1aa6050e142aa2810fbad1f7a4507bc3c',
    '0x3b308a7ee90e6784f18d34a814532952b07fa734',
    '0xe8c575a73b73474a1a48da814981ef4a0a9c7ec7',
    '0xb8e7170307731619b14d1673c812da60b6474b4b',
    '0x5c6d9f90e88b512ea1dae66136e9e09af2aee6c2',
    '0x2ad7546a19eb5d5edb37ec88a4775995078d1cad',
    '0x8537a336fc74ea742527e8300175a7b07a108c9e',
    '0x08f04a3db30b0cd7e42e61b4e412b1123c52e8a1',
    '0x7ad07b280a17ac7af489e487eaaf004b69786a0a',
    '0xb185eed7f1220e291f548efa2412e02c714a2364',
    '0xe385b4a4ba16fdabd2ecb9c0dda206c9fa2748a3',
    '0xdebdab749330bb976fd10dc52f9a452aaf029028',
    '0x12ac805f4596c3e55bb100b4593a1b8025cd2056',
    '0x4de31e9d79afb2d1c3eb62f19f6edf9afe95a193',
    '0xde604f03e44247b31f71c4fa055f9f3ea08d1271',
    '0x6e14a20334724a194d2f8b38162522cad202b986',
    '0x826a7ca5eb95db6c175fa2d8bab39747023340d7',
    '0x6f11663766bb213003cd74eb09ff4c67145023c5',
    '0xc37fa1c70d77bded373c551a92babcee44a9d04e',
    '0x1823332514733226e80b21b9094159fb5cd3a74b',
    '0x59ae1ef9fcaff341140ea01a2e6aa5417591e014',
    '0x8c7a2c0729afb927da27d4c9aa172bc5a5fb12bb',
    '0x8b3779350ac93eab1bea44f96167580c1ae6e846',
    '0x8d024593d781b1c86ecd5d0f899d10c5e9de7069',
    '0x2497e12d79e0138a5ec0fd799f1411cde90ab472',
    '0xb2ce48fdefa4d7dbfcfad6eebe40511f4897c6ce',
    '0x9ccf74e64922d8a48b87aa4200b7c27b2b1d860a',
    '0x32c912324cfef57005f7362d1e3881847f10b7f2',
    '0x2a377470dcf0e00f6ded484ddf82df65f0fb50af',
    '0xb6a53021e7a40ea20df1e1991b0c89432073386e',
    '0x22e550043ab05065af056d5ab839569fd8937ac2',
    '0x9021ee971994807c6a137a7a86b30091820f31c6',
    '0x77c195c6fb2198ea346b17b23a97e9e9a529ddba',
    '0x392cb22c2238b7d4097777aeee757a63b967e52f',
    '0xc6414c677451689cfc966c5a02eb67937e47b8da',
    '0x8985badaf9c51862a8a1fd7e46c3b6213df79157',
    '0x3ff6b17f7a1c39e039581a36e13fcdf61f3b7777',
    '0xd7b6acc0747f0f063f8e7bd9e92c5f41d50f5cf0',
    '0xf93ada1d20b1df559ca379f53424622183c5fe54',
    '0xa1965a7e64573621a489e8f2346588ce3698c971',
    '0xe94e9a02091dd041c7ac9efbb93ce81384fa06bb',
    '0xadb3a39683bb9cec0d2adac6d847ed8220d9a5b1',
    '0xe97614a00b293102770260d3b34ba27bcfd810a1',
    '0x8cc66e2f168dbf6c628e2c13c9105bd353684806',
    '0xe5a993e6e58c39677f46cdd1a2c97711c9a16008',
    '0x1a066394aec5bfa7f445a490cf078a2e81d0ea41',
    '0xfefaf6865fdfb801937795932d111c774f3f1087',
    '0xd94912902d9baee5fa94ac40c769af8dbcf60ecd',
    '0x0871414019d6b1321db93aa71a1fc885e67b4bda',
    '0x95975a9a68d03a518ff94536abc21d412c0a4024',
    '0xda6d41dcb59d5ead3b7254401fa1d3dd6f810781',
    '0xb7ae4d4425fa9fc1922d3c3633dde6cabd138e6b',
    '0x3339b2fcacf8549102a543e76813da93edb8082b',
    '0x92b2b1f2a6ca5729839787db04f93dab77ec25e6',
    '0xc176bf24c2f4eacc614159611cedb5633a002147',
    '0x647ca0189fa2689a06b87c9391af4994d2bb1aa5',
    '0xc0d4b99cbe4f118006b786e45d3ec42c4eccd961',
    '0x9c3649c1c5c9c1b83cf4b9818778abac66df95e1',
    '0xbf014d03bb0d0d4f96ed10448062faa3564c1b33',
    '0x516161a32f36f9f8e31f6dcbe3ac8db6bb25e57f',
    '0x844e3a70eda27004084c916cf13c2b939f97563d',
    '0xdab663377739f7970c2a480960f32bc03c63cf3d',
    '0x79b8215320379735abff5b1b3984825bb4bdeab8',
    '0x148836296ae963129faa4645f09136ffbefc5f45',
    '0x564b50adec4b4e8c6b57b37ac9658694bf068225',
    '0x1c0803d4388311210c2bec79a3bdd83765333d57',
    '0x50a2247c60b0e6960d639803cdecc84a0423f733',
    '0x0f1afd1fc8b428fa6bcbd616ce52b4835760da64',
    '0x90cb9384a3176810c65382c72cf49ed407c1eae8',
    '0xa29b02f53051d5801e1b715936d9530ffd188aca',
    '0xc5ad42bd83117eab483e80603af816969041de13',
    '0x59f4b7b0807d44bfd2356f5b67dee2b738a35fb5',
    '0xb6626093146229e2e5ead97f92b2c54569920cf6',
    '0xfcb4332dcbbfd21abf3ebe2d086bebf20bed8edd',
    '0x81c52fd0ec51bf571321578bb08262b530d43b0e',
    '0xfeb040e55edb90c03df2884c15f4f8ded8add695',
    '0xcb0272826532f1b26796df593dfb318ad9e3da2f',
    '0xca1a9186c987dcc26c2a5ec3015e729816a98cdd',
    '0x8cdddfa9c35c715610ef84c5d139e0ab9b858e0d',
    '0x6a662eb7f1b68beed2977d10b5d04e9e7eb99dd2',
    '0x9015e2635f275a6c67c641010c1571f39db1dea5',
    '0xf52bea904de57a8fd29d5bcc6a2931fe3291871e',
    '0x2b39837dd7212f8c60a5aab897db8a8d8e66eea9',
    '0xae15cdc64db6dd1ff00236ad405356acb0698d68',
    '0x8c7d53d58ea77e81f5a274f537f0cb29b65eb41d',
    '0x24424449e92e5d3ac0f52f2e64bba31f60cc01d2',
    '0x24db51474102803aa322bb4b62703e95bcd1e807',
    '0xad7e8381bafd016b8afb6e7af23db138a070f7cc',
    '0xbd5d8eadb95c2b288e4f619ed39e01250be5920d',
    '0xc9d17a65823cba0b0376a969aca5bee69a5153d1',
    '0x6356f6ca5d9cf763d8804b27915517a1e53310d2',
    '0x8d79fbd7694509474198aa52fd3183df9ad350a0',
    '0xc40080d226ad1956adb1fcbac494d1a6dade382e',
    '0xfee83cb23c54957b07555172c6ffd6e10d678a71',
    '0xa9e681ec6601116781ec32a1d7cfe26e5d8b565d',
    '0xa1f45396216ac36ec22a1d9c52c649db39987c44',
    '0x4daca93176044858a237773d34fc2dd861aedd69',
    '0xc314add1358d38d26a3e1727f943b4f347808346',
    '0x5facf19daaa19294a66a59b5e2f73299b397146c',
    '0xfb36522f7a4878ed5abf468184fcab787679fd9c',
    '0x049544ff618b3345e898f6e36225858f74822707',
    '0xe4f815db7b452a9c68713b814d17bed6b65c152c',
    '0xeb87f4f90c5a685e2ac7fddfb8b7416f91d8a499',
    '0x683dbc88b371ae48962b56e36e5a0c34e3ad4caf',
    '0x9a4b4f8c10ff344c1a7e1a9dfc297492ec4343e3',
    '0xa32ba85504921c1c080ad01712271a956d9991c2',
    '0xf63152ff9a315062018a1bf38f53e9bf97c5dbda',
    '0x657cdc99dc15448e680ee39a4bd76bb0d5fcdc6d',
    '0xfc4f0376c364aafd178e16dace3a4441b90a65fa',
    '0x6a13133781b39a9e76c8ca40cb739c71c90edbbf',
    '0xf849ef2446dee453bf8988d70c72054602428348',
    '0xced0eb9efdbfd486c27d17aa55fd4a01fc7aa6e1',
    '0xa13327562924ab07f70440de8b7fd85824a99683',
    '0xa3b2e9c59a6c0a03239f89e860c27d73630572c0',
    '0x74873cc11eea09d686ad30f5ce9ec1a1152faa7c',
    '0xaf2e837150e941b87296ed7dca4a0c0b83c4242a',
  ],
};
